<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVALUACI√ìN DE ENTORNOS</title>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f2f2f2;
            overflow: hidden;
        }

        /* Contenedor principal */
        .game-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        /* √Årea de la pregunta (Parte superior) */
        .question-area {
            flex: 1; 
            background-color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 10;
        }

        h2 {
            font-size: 32px;
            color: #333;
            max-width: 900px;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .contador {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #333;
            color: #fff;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 18px;
        }

        /* √Årea de respuestas (Parte inferior - Grilla 2x2) */
        .answers-grid {
            height: 50%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 5px;
            padding: 5px;
            background-color: #ccc;
        }

        .btn-option {
            border: none;
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            text-transform: uppercase;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .btn-option:active {
            transform: scale(0.98);
        }

        /* Colores */
        .btn-casa { background-color: #e21b3c; }    
        .btn-escuela { background-color: #1368ce; } 
        .btn-patio { background-color: #d89e00; }   
        .btn-iglesia { background-color: #26890c; } 

        .icon { margin-right: 15px; font-size: 35px; }

        /* Pantalla de Feedback */
        #feedback-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            font-size: 60px;
            font-weight: bold;
            color: white;
            z-index: 100;
        }
        
        .correct-bg { background-color: rgba(38, 137, 12, 0.95); }
        .wrong-bg { background-color: rgba(226, 27, 60, 0.95); }

        /* Pantalla Final */
        #final-screen {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            background-color: #333;
            color: white;
            text-align: center;
        }

        .btn-next-level {
            margin-top: 30px;
            padding: 15px 40px;
            font-size: 24px;
            background-color: #fff;
            color: #333;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
        }
        .btn-next-level:hover { background-color: #ddd; }

    </style>
</head>
<body>

    <div class="game-container" id="game-ui">
        <div class="question-area">
            <div class="contador" id="contador-texto">Aciertos: 0 / 3</div>
            <h2 id="question-text">Cargando...</h2>
        </div>

        <div class="answers-grid">
            <button class="btn-option btn-casa" onclick="checkAnswer('CASA')">
                <span class="icon">üè†</span> CASA
            </button>
            <button class="btn-option btn-escuela" onclick="checkAnswer('ESCUELA')">
                <span class="icon">üìö</span> ESCUELA
            </button>
            <button class="btn-option btn-patio" onclick="checkAnswer('PATIO')">
                <span class="icon">‚öΩ</span> PATIO
            </button>
            <button class="btn-option btn-iglesia" onclick="checkAnswer('IGLESIA')">
                <span class="icon">‚õ™</span> IGLESIA
            </button>
        </div>
    </div>

    <div id="final-screen">
        <h1 style="font-size: 50px;">¬°PRUEBA COMPLETADA!</h1>
        <p style="font-size: 24px;">Has reconstruido el ambiente salesiano correctamente.</p>
        <a href="final.html" class="btn-next-level">CONTINUAR</a>
    </div>

    <div id="feedback-overlay"></div>

    <script>
        // 1. BANCO DE PREGUNTAS
        const bancoPreguntas = [
            {
                texto: "‚ÄúUn joven no quiere venir m√°s porque siente que no encaja.‚Äù",
                respuestaCorrecta: "CASA"
            },
            {
                texto: "‚ÄúUn chico se manda una macana y nadie lo vuelve a mirar igual.‚Äù",
                respuestaCorrecta: "ESCUELA"
            },
            {
                texto: "‚ÄúEl grupo se junta solo para actividades, pero no se conoce.‚Äù",
                respuestaCorrecta: "PATIO"
            },
            {
                texto: "‚ÄúLlega un chico nuevo al patio y nadie se acerca a saludarlo porque todos est√°n en su grupito de siempre.‚Äù",
                respuestaCorrecta: "IGLESIA"
            },
            {
                texto: "‚ÄúUn joven deja de venir porque no tiene dinero para pagar el campamento y le da verg√ºenza pedir beca.‚Äù",
                respuestaCorrecta: "CASA"
            },
            {
                texto: "‚ÄúA un chico lo tildaron de 'problem√°tico' hace dos a√±os y, aunque cambi√≥, los animadores lo siguen tratando con desconfianza.‚Äù",
                respuestaCorrecta: "ESCUELA"
            },
            {
                texto: "‚ÄúUn joven entra y sale del oratorio sin que ning√∫n adulto o animador note su presencia ni le pregunte c√≥mo est√°.‚Äù",
                respuestaCorrecta: "CASA"
            },
            {
                texto: "‚ÄúUn animador reprende a un chico a los gritos delante de todos, humill√°ndolo en lugar de corregirlo al o√≠do.‚Äù",
                respuestaCorrecta: "ESCUELA"
            },
            {
                texto: "‚ÄúEl grupo nota que el coordinador tiene 'preferidos' a los que les perdona todo, mientras que con otros es inflexible.‚Äù",
                respuestaCorrecta: "ESCUELA"
            },
            {
                texto: "‚ÄúUn chico intenta contar un problema personal, pero el animador est√° mirando el celular o pensando en la siguiente actividad.‚Äù",
                respuestaCorrecta: "CASA"
            },
            {
                texto: "‚ÄúUn joven confiesa una duda de fe y, en lugar de ser acogido, recibe un serm√≥n moralista que lo aleja.‚Äù",
                respuestaCorrecta: "IGLESIA"
            },
            {
                texto: "‚ÄúUn animador est√° agotado y triste, pero nadie le pregunta qu√© le pasa porque se asume que '√©l siempre puede con todo'.‚Äù",
                respuestaCorrecta: "CASA"
            },
            {
                texto: "‚ÄúSe hacen juegos incre√≠bles y grandes decoraciones, pero se termina el d√≠a sin haber hecho ni una breve oraci√≥n.‚Äù",
                respuestaCorrecta: "IGLESIA"
            },
            {
                texto: "‚ÄúLos chicos ven que sus animadores hablan de Dios el s√°bado, pero en la semana act√∫an de forma opuesta a lo que predican.‚Äù",
                respuestaCorrecta: "IGLESIA"
            },
            {
                texto: "‚ÄúLa misa es tan r√≠gida y lejana a la realidad de los chicos que sienten que Dios no tiene nada que ver con sus vidas cotidianas.‚Äù",
                respuestaCorrecta: "IGLESIA"
            },
            {
                texto: "‚ÄúSe obliga a los chicos a ir a la capilla como castigo o requisito, haciendo que vean la fe como una carga.‚Äù",
                respuestaCorrecta: "IGLESIA"
            },
            {
                texto: "‚ÄúLos chicos sienten que pierden el tiempo porque los animadores llegan sin preparar nada y se nota que improvisan.‚Äù",
                respuestaCorrecta: "ESCUELA"
            },
            {
                texto: "‚ÄúLos j√≥venes mayores no dejan espacio ni responsabilidades a los nuevos l√≠deres porque no quieren perder su lugar.‚Äù",
                respuestaCorrecta: "ESCUELA"
            },
            {
                texto: "‚ÄúUn joven propone una idea nueva para mejorar el grupo y es rechazado autom√°ticamente por los coordinadores antiguos.‚Äù",
                respuestaCorrecta: "ESCUELA"
            },
            {
                texto: "‚ÄúEn lugar de colaborar, los distintos grupos compiten entre s√≠ agresivamente para ver qui√©n es el mejor.‚Äù",
                respuestaCorrecta: "PATIO"
            }

        ];

        // VARIABLES DE ESTADO
        let preguntasPendientes = []; // Copia para ir eliminando las acertadas
        let preguntaActual = null;
        let aciertos = 0;
        const metaAciertos = 5;

        // INICIAR
        window.onload = function() {
            // Creamos una copia del banco original
            preguntasPendientes = [...bancoPreguntas];
            cargarSiguientePregunta();
        };

        function cargarSiguientePregunta() {
            // Actualizar contador
            document.getElementById("contador-texto").innerText = `Aciertos: ${aciertos} / ${metaAciertos}`;

            // Elegir una pregunta al azar de las pendientes
            if (preguntasPendientes.length > 0) {
                const indiceAleatorio = Math.floor(Math.random() * preguntasPendientes.length);
                preguntaActual = preguntasPendientes[indiceAleatorio];
                
                // Mostrar texto
                document.getElementById("question-text").innerText = preguntaActual.texto;
            }
        }

        function checkAnswer(seleccion) {
            const overlay = document.getElementById("feedback-overlay");

            if (seleccion === preguntaActual.respuestaCorrecta) {
                // --- CORRECTO ---
                aciertos++;
                
                // Eliminar la pregunta actual de la lista de pendientes para que no repita
                const index = preguntasPendientes.indexOf(preguntaActual);
                if (index > -1) {
                    preguntasPendientes.splice(index, 1);
                }

                // Feedback visual
                mostrarFeedback("¬°CORRECTO!", "correct-bg");

                setTimeout(() => {
                    overlay.style.display = "none";
                    
                    // Verificar si gan√≥ o sigue jugando
                    if (aciertos === metaAciertos) {
                        finalizarJuego();
                    } else {
                        cargarSiguientePregunta();
                    }
                }, 1500);

            } else {
                // --- INCORRECTO ---
                // No sumamos aciertos. No borramos la pregunta (volver√° a salir luego o ahora)
                mostrarFeedback("INCORRECTO", "wrong-bg");

                setTimeout(() => {
                    overlay.style.display = "none";
                    // Volvemos a cargar aleatoriamente (puede salir la misma u otra pendiente)
                    cargarSiguientePregunta(); 
                }, 1000);
            }
        }

        function mostrarFeedback(texto, claseColor) {
            const overlay = document.getElementById("feedback-overlay");
            overlay.className = claseColor;
            overlay.innerText = texto;
            overlay.style.display = "flex";
        }

        function finalizarJuego() {
            document.getElementById("game-ui").style.display = "none";
            document.getElementById("final-screen").style.display = "flex";
        }
    </script>

</body>
</html>